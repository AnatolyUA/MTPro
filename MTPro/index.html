<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta charset="utf-8" />
        <script src="cordova.js"></script>
        <script src="kendo/js/jquery.min.js"></script>
        <script src="kendo/js/kendo.mobile.min.js"></script>
        <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
        <script src="scripts/hello-world.js"></script>

        <link href="kendo/styles/kendo.mobile.all.min.css" rel="stylesheet" />
        <link href="styles/main.css" rel="stylesheet" />
    </head>
    <body>

        <div data-role="view" data-init="newsListInit" data-title="Latest news" id="tabstrip-newsList">
            <ul id="newsList"></ul>
        </div>

        <div data-role="layout" data-id="mobile-tabstrip">
            <header data-role="header">
                <div data-role="navbar">
                    <span data-role="view-title"></span>
                </div>
            </header>

            <div data-role="footer">
                <div data-role="tabstrip">
                    <a href="#tabstrip-newsList" data-icon="home">Home</a>
                </div>
            </div>
        </div>

        <script>
            var app = new kendo.mobile.Application(document.body, { transition: "slide", layout: "mobile-tabstrip" });
        </script>






        <script id="newsList-template" type="text/x-kendo-template">
            <div class="Story">
                #if (ImageSrc) { #
                    <img class="pullImage" src="#= ImageSrc #" alt="#= Title #" />
                # } #
                <h2>#= Title #</h2>
                <p>#= Description #</p>
                <div class="metadata">
                    #= kendo.toString(new Date(parseInt(DatePublished.substr(6))), "dd MMM HH:mm") #
                </div>
            </div>
        </script>


        <script>
            function newsListInit() {
                var dataSource = new kendo.data.DataSource({
                    pageSize: 12,
                    serverPaging: true,
                    transport: {
                        read: {
                            url: "http://api.maritimeprofessional.com/json/StreamNews", // the remove service url
                            dataType: "jsonp" // JSONP (JSON with padding) is required for cross-domain AJAX
                        },
                        parameterMap: function(options) {
                            var parameters = {
                                imageWidth:80,
                                ImageHeight:60,
                                take: options.pageSize,
                                skip: options.skip
                                // page: options.page //next page
                            }

                            return parameters;
                        }
                    },
                    schema: { // describe the result format
                        data: "Stories" // the data which the data source will be bound to is in the "results" field
                    }
                });

                $("#newsList").kendoMobileListView({
                    dataSource: dataSource,
                    template: $("#newsList-template").text(),
                    endlessScroll: true,
                    scrollTreshold: 30 //treshold in pixels
                });
            }
        </script>
    </body>
</html>
